---
import Hero from './Hero.astro';
import TilesGrid from './TilesGrid.astro';
import MetricsBand from './MetricsBand.astro';
import Testimonials from './Testimonials.astro';
import CTA from './CTA.astro';
import Carousel from './Carousel.astro';
import Statistics from './Statistics.astro';
import Logos from './Logos.astro';
import Timeline from './Timeline.astro';
import TeamProfiles from './TeamProfiles.astro';
import ProcessSteps from './ProcessSteps.astro';
import CaseStudy from './CaseStudy.astro';
import ContactForm from './ContactForm.astro';
import LocationMap from './LocationMap.astro';
import EventsList from './EventsList.astro';
import FilterableGrid from './FilterableGrid.astro';
import FAQ from './FAQ.astro';
import InsightsPreview from './InsightsPreview.astro';

export interface Props {
  block: {
    id: string;
    type: string;
    props: any;
    layout?: {
      colSpan?: number;
      rowSpan?: number;
      order?: number;
    };
    children?: any[];
  };
}

const { block } = Astro.props;

// Block type mapping
const blockComponents = {
  Hero,
  TilesGrid,
  MetricsBand,
  Testimonials,
  CTA,
  Carousel,
  Statistics,
  Logos,
  Timeline,
  TeamProfiles,
  ProcessSteps,
  CaseStudy,
  ContactForm,
  LocationMap,
  EventsList,
  FilterableGrid,
  FAQ,
  InsightsPreview,
  // Add more blocks as they're created
};

const BlockComponent = blockComponents[block.type as keyof typeof blockComponents];

if (!BlockComponent) {
  console.error(`Unknown block type: ${block.type}`);
}
---

{BlockComponent && (
  <BlockComponent {...block.props} />
)}

{!BlockComponent && (
  <div class="bg-red-50 border border-red-200 rounded-lg p-4 m-4">
    <p class="text-red-800">
      <strong>Block Error:</strong> Unknown block type "{block.type}"
    </p>
    <pre class="text-red-600 text-sm mt-2">
      {JSON.stringify(block, null, 2)}
    </pre>
  </div>
)}
