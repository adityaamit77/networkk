---
import Heading from '../ui/Heading.astro';
import Image from '../ui/Image.astro';

export interface Props {
  heading: string;
  description?: string;
  items: Array<{
    date: string;
    title: string;
    description: string;
    icon?: string;
    media?: {
      image?: string;
      alt?: string;
    };
  }>;
  layout?: 'vertical' | 'horizontal';
}

const {
  heading,
  description,
  items,
  layout = 'vertical'
} = Astro.props;

const isVertical = layout === 'vertical';
---

<section class="section bg-white py-16 md:py-24">
  <div class="container">
    <!-- Header -->
    {(heading || description) && (
      <div class="text-center max-w-3xl mx-auto mb-16">
        {heading && (
          <Heading level={2} class="mb-4">
            {heading}
          </Heading>
        )}
        {description && (
          <p class="text-xl text-gray-600">
            {description}
          </p>
        )}
      </div>
    )}
    
    <!-- Timeline -->
    <div class={`timeline ${isVertical ? 'timeline-vertical' : 'timeline-horizontal'}}`}>
      {isVertical ? (
        <div class="relative">
          {/* Vertical line */}
          <div class="absolute left-1/2 transform -translate-x-1/2 h-full w-0.5 bg-blue-200"></div>
          
          <div class="space-y-16">
            {items.map((item, index) => (
              <div class={`relative flex items-center ${index % 2 === 0 ? 'flex-row' : 'flex-row-reverse'}`}>
                {/* Timeline dot */}
                <div class="absolute left-1/2 transform -translate-x-1/2 w-4 h-4 rounded-full bg-blue-500 z-10"></div>
                
                {/* Content */}
                <div class={`w-1/2 ${index % 2 === 0 ? 'pr-12 text-right' : 'pl-12 text-left'}`}>
                  <span class="block text-blue-600 font-semibold mb-2">{item.date}</span>
                  <Heading level={3} class="mb-3">{item.title}</Heading>
                  <p class="text-gray-600">{item.description}</p>
                  
                  {item.media?.image && (
                    <div class="mt-4 overflow-hidden rounded-lg">
                      <Image 
                        src={item.media.image} 
                        alt={item.media.alt || item.title} 
                        class="w-full h-auto" 
                        width={400} 
                        height={225}
                      />
                    </div>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      ) : (
        <div class="relative overflow-x-auto pb-12">
          {/* Horizontal line */}
          <div class="absolute top-8 left-0 w-full h-0.5 bg-blue-200"></div>
          
          <div class="flex space-x-16 min-w-max">
            {items.map((item) => (
              <div class="relative pt-12 w-64">
                {/* Timeline dot */}
                <div class="absolute top-8 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-blue-500 z-10"></div>
                
                {/* Content */}
                <span class="block text-blue-600 font-semibold mb-2">{item.date}</span>
                <Heading level={3} class="mb-3">{item.title}</Heading>
                <p class="text-gray-600">{item.description}</p>
                
                {item.media?.image && (
                  <div class="mt-4 overflow-hidden rounded-lg">
                    <Image 
                      src={item.media.image} 
                      alt={item.media.alt || item.title} 
                      class="w-full h-auto" 
                      width={300} 
                      height={169}
                    />
                  </div>
                )}
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  </div>
</section>